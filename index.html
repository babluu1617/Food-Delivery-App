<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zesty â€” Food Delivery</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0f1a;
      --card:#12182a;
      --muted:#96a0b5;
      --text:#f5f7ff;
      --brand:#7c5cff;
      --brand-2:#00e0a4;
      --good:#12d18e;
      --warn:#ff6363;
      --bakery:#ffb75e;
      --glass:rgba(255,255,255,.06);
      --ring:0 0 0 2px rgba(124,92,255,.45),0 8px 30px rgba(124,92,255,.25);
      --radius:18px;
    }

    .banner { height: 180px; overflow: hidden; border-radius: 12px; }
    .banner img { width: 100%; height: 100%; object-fit: cover; display: block; }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;
      background:radial-gradient(1200px 700px at 90% -10%, rgba(124,92,255,.25), transparent 50%),
                 radial-gradient(900px 500px at -20% 20%, rgba(0,224,164,.18), transparent 60%),
                 var(--bg);
      color:var(--text);
    }
    a{color:inherit}
    .container{max-width:1200px; margin:0 auto; padding:24px}

    header{
      position:sticky; top:0; z-index:50; backdrop-filter:saturate(140%) blur(8px);
      background:linear-gradient(180deg, rgba(14,17,30,.9), rgba(14,17,30,.55));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .topbar{display:flex; align-items:center; gap:14px; padding:14px 24px}
    .logo{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.5px}
    .logo-mark{width:34px; height:34px; background:conic-gradient(from 0deg, var(--brand), var(--brand-2)); border-radius:10px; display:grid; place-items:center; box-shadow:0 10px 30px rgba(124,92,255,.4)}
    .logo-mark svg{filter:drop-shadow(0 4px 10px rgba(0,0,0,.4))}

    .loc{
      margin-left:auto; display:flex; gap:10px; align-items:center; background:var(--glass);
      border:1px solid rgba(255,255,255,.08); border-radius:999px; padding:8px 14px; color:var(--muted)
    }
    .search{
      flex:1; display:flex; align-items:center; gap:10px; background:var(--glass);
      border:1px solid rgba(255,255,255,.08); border-radius:999px; padding:10px 14px; max-width:560px
    }
    .search input{flex:1; background:transparent; border:0; outline:0; color:var(--text)}

    .cart-btn{display:flex; align-items:center; gap:10px; background:linear-gradient(135deg, rgba(124,92,255,.15), rgba(0,224,164,.15)); border:1px solid rgba(255,255,255,.1); border-radius:999px; padding:10px 14px; cursor:pointer}
    .pill{background:rgba(255,255,255,.1); padding:3px 9px; border-radius:999px; font-size:12px}

    .chips{display:flex; flex-wrap:wrap; gap:10px; margin-top:14px}
    .chip{padding:8px 14px; border-radius:999px; background:var(--card); border:1px solid rgba(255,255,255,.08); cursor:pointer; color:var(--muted)}
    .chip.active{color:var(--text); background:linear-gradient(135deg, rgba(124,92,255,.2), rgba(0,224,164,.2)); border-color:rgba(124,92,255,.45)}

    .grid{display:grid; grid-template-columns:repeat(12,1fr); gap:18px; margin-top:18px}
    .left{grid-column:span 9}
    .right{grid-column:span 3}

    .card{background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:var(--radius); overflow:hidden; box-shadow:0 8px 20px rgba(0,0,0,.25)}
    .banner{height:150px; background:linear-gradient(135deg, rgba(255,255,255,.12), rgba(255,255,255,.02)); position:relative}
    .banner .badges{position:absolute; bottom:10px; left:10px; display:flex; gap:8px}
    .badge{font-size:12px; padding:6px 10px; border-radius:999px; font-weight:600}
    .badge.veg{background:rgba(18,209,142,.16); border:1px solid rgba(18,209,142,.45); color:#9af0cf}
    .badge.nonveg{background:rgba(255,99,99,.16); border:1px solid rgba(255,99,99,.45); color:#ffc7c7}
    .badge.bakery{background:rgba(255,183,94,.16); border:1px solid rgba(255,183,94,.45); color:#ffdcb0}

    .card-body{padding:14px}
    .title{display:flex; justify-content:space-between; align-items:center}
    .title h3{margin:0; font-size:18px}
    .rating{display:flex; align-items:center; gap:6px; font-weight:700}
    .muted{color:var(--muted)}
    .dot{width:8px; height:8px; border-radius:50%; display:inline-block; margin-right:8px}

    .meta{display:flex; align-items:center; gap:10px; margin:8px 0 12px}
    .meta .sep{opacity:.35}

    .add{display:flex; justify-content:space-between; align-items:center; gap:10px}
    .qty{display:flex; align-items:center; gap:8px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:6px}
    .qty button{background:transparent; color:var(--text); border:0; font-size:18px; width:28px; height:28px; cursor:pointer}
    .btn{background:linear-gradient(135deg, var(--brand), var(--brand-2)); border:0; color:white; font-weight:700; padding:10px 14px; border-radius:12px; cursor:pointer; box-shadow:var(--ring)}

    .side-card{position:sticky; top:90px; padding:16px}
    .side-card h4{margin:0 0 10px}
    .side-line{display:flex; align-items:center; justify-content:space-between; margin:6px 0}
    .hr{height:1px; background:rgba(255,255,255,.08); margin:12px 0}

    .empty{color:var(--muted); text-align:center; padding:16px}

    .drawer{position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.55)}
    .drawer.active{display:grid}
    .sheet{width:min(960px, 94vw); max-height:90vh; background:#0e1321; border:1px solid rgba(255,255,255,.08); border-radius:22px; overflow:hidden; display:grid; grid-template-columns: 420px 1fr}
    .sheet .pane{padding:18px; overflow:auto}
    .sheet .pane.left{border-right:1px solid rgba(255,255,255,.08)}

    .steps{display:flex; align-items:center; gap:12px; margin:10px 0 14px}
    .step{display:flex; align-items:center; gap:10px}
    .step-dot{width:16px; height:16px; border-radius:50%; background:rgba(255,255,255,.12); border:2px solid rgba(255,255,255,.18)}
    .step.active .step-dot{background:var(--brand-2); border-color:rgba(0,224,164,.6)}

    .map-wrap{position:relative; background:linear-gradient(180deg, #0b1120, #0b1328); border:1px solid rgba(255,255,255,.08); border-radius:16px; height:380px; overflow:hidden}
    svg#map{width:100%; height:100%; display:block}
    .eta{position:absolute; top:10px; left:10px; background:rgba(0,0,0,.45); padding:8px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.12); font-weight:700}
    .legend{position:absolute; bottom:10px; left:10px; display:flex; gap:10px}
    .legend .leg{display:flex; align-items:center; gap:6px; background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.1); border-radius:10px; padding:6px 10px; font-size:12px}
    .legend .sw{width:10px; height:10px; border-radius:50%}

    .close-x{position:absolute; top:10px; right:14px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); border-radius:999px; width:36px; height:36px; display:grid; place-items:center; cursor:pointer}

    @media (max-width: 1024px){
      .left{grid-column:span 12}
      .right{grid-column:span 12}
      .sheet{grid-template-columns:1fr}
      .sheet .pane.left{border-right:0; border-bottom:1px solid rgba(255,255,255,.08)}
    }
  </style>
</head>
<body>
  <header>
    <div class="topbar container">
      <div class="logo">
        <div class="logo-mark" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L21 8L12 14L3 8L12 2Z" fill="white" fill-opacity="0.9"/>
            <path d="M12 14L21 8V16L12 22L3 16V8L12 14Z" fill="white" fill-opacity="0.6"/>
          </svg>
        </div>
        <span>Zesty</span>
      </div>

      <div class="search" role="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M10.5 3.5a7 7 0 015.54 11.3l4.08 4.08-1.42 1.42-4.08-4.08A7 7 0 1110.5 3.5zm0 2a5 5 0 100 10 5 5 0 000-10z" fill="#cbd5e1"/></svg>
        <input id="search" placeholder="Search for dosa, croissant, biryaniâ€¦" />
      </div>

      <div class="loc" title="Delivery location">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 2C7.58 2 4 5.58 4 10c0 5.25 5.7 10.34 7.6 11.88.24.19.56.19.8 0C14.3 20.34 20 15.25 20 10c0-4.42-3.58-8-8-8zm0 5a3 3 0 110 6 3 3 0 010-6z" fill="#cbd5e1"/></svg>
        <span id="locLabel">Hyderabad â€¢ Now</span>
      </div>

      <button class="cart-btn" id="openCart">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M7 4h-2l-1 2v2h2l3.6 7.59-1.35 2.44A1 1 0 009 20h9v-2H9.42l1.1-2H17a1 1 0 00.92-.61L21 7H6.21l-.94-2H7V4zM7 22a2 2 0 110-4 2 2 0 010 4zm10 0a2 2 0 110-4 2 2 0 010 4z" fill="#e2e8f0"/></svg>
        <span>Cart</span>
        <span id="cartCount" class="pill">0</span>
      </button>
    </div>

    <div class="cart" style="padding:0 24px 12px;">
      ðŸ›’ <span id="cart-count">0</span> items â€” Total: â‚¹<span id="cart-total">0</span>
    </div>

    <div class="container">
      <div class="chips" id="chips"></div>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <section class="left" id="grid"></section>
      <aside class="right">
        <div class="card side-card" id="cartPanel">
          <h4>Order Summary</h4>
          <div class="hr"></div>
          <div id="cartItems" class="empty">Your cart is empty. Add something tasty ðŸ˜‹</div>
          <div class="hr"></div>
          <div class="side-line"><span>Subtotal</span><strong id="subTotal">â‚¹0</strong></div>
          <div class="side-line"><span>Delivery</span><span class="muted" id="deliveryFee">â‚¹0</span></div>
          <div class="side-line"><span>Taxes & fees</span><span class="muted" id="taxFee">â‚¹0</span></div>
          <div class="hr"></div>
          <div class="side-line"><span>Total</span><strong id="grandTotal">â‚¹0</strong></div>
          <div style="margin-top:12px; display:flex; gap:10px">
            <button id="checkout" class="btn" style="flex:1">Checkout</button>
            <button id="clear" class="qty" title="Clear cart" style="flex:0 0 auto"><span style="opacity:.8">Clear</span></button>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <!-- Drawer: Checkout & Live Tracking -->
  <div class="drawer" id="drawer">
    <div class="sheet">
      <div class="pane left">
        <div class="close-x" id="closeDrawer" aria-label="Close">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.3 5.7l-12.6 12.6M5.7 5.7l12.6 12.6" stroke="#cbd5e1" stroke-width="2" stroke-linecap="round"/></svg>
        </div>
        <h2 style="margin:0 0 8px">Order Tracking</h2>
        <div class="muted" id="orderId">Order #ZSTY-0001</div>

        <div class="steps">
          <div class="step active" id="st1"><div class="step-dot"></div><div>Placed</div></div>
          <svg width="40" height="2"><rect width="40" height="2" fill="rgba(255,255,255,.12)"/></svg>
          <div class="step" id="st2"><div class="step-dot"></div><div>Preparing</div></div>
          <svg width="40" height="2"><rect width="40" height="2" fill="rgba(255,255,255,.12)"/></svg>
          <div class="step" id="st3"><div class="step-dot"></div><div>On the way</div></div>
          <svg width="40" height="2"><rect width="40" height="2" fill="rgba(255,255,255,.12)"/></svg>
          <div class="step" id="st4"><div class="step-dot"></div><div>Delivered</div></div>
        </div>

        <div class="hr"></div>
        <div id="trackItems"></div>
        <div class="hr"></div>
        <div>
          <div class="side-line"><span>To</span><strong id="toAddr">Akshith â€¢ SR University, Hanamkonda</strong></div>
          <div class="side-line"><span>Rider</span><span class="muted">Kiran (TS09 AB 4321)</span></div>
        </div>
      </div>
      <div class="pane">
        <div class="map-wrap">
          <div class="eta">Arriving in <span id="eta">--</span></div>
          <svg id="map" viewBox="0 0 600 380" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="road" x1="0" x2="1">
                <stop offset="0%" stop-color="#7c5cff" stop-opacity="0.9"/>
                <stop offset="100%" stop-color="#00e0a4" stop-opacity="0.9"/>
              </linearGradient>
              <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                <feMerge>
                  <feMergeNode in="coloredBlur"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>
            <g opacity=".18" stroke="#b6c2e0">
              <rect x="20" y="20" width="160" height="120" fill="none"/>
              <rect x="200" y="20" width="160" height="120" fill="none"/>
              <rect x="380" y="20" width="200" height="120" fill="none"/>
              <rect x="20" y="160" width="200" height="100" fill="none"/>
              <rect x="240" y="160" width="160" height="100" fill="none"/>
              <rect x="420" y="160" width="160" height="100" fill="none"/>
              <rect x="20" y="270" width="180" height="90" fill="none"/>
              <rect x="220" y="270" width="200" height="90" fill="none"/>
              <rect x="440" y="270" width="140" height="90" fill="none"/>
            </g>
            <path id="route" d="M60 70 L280 70 L280 210 L520 210 L520 320 L280 320 L280 300" stroke="url(#road)" stroke-width="6" fill="none" filter="url(#glow)" stroke-linecap="round"/>
            <g id="store" transform="translate(48,58)">
              <rect x="-10" y="-10" width="24" height="24" rx="6" ry="6" fill="#1f2937" stroke="#94a3b8"/>
              <circle cx="2" cy="2" r="4" fill="#f59e0b"/>
            </g>
            <g id="home" transform="translate(280,300)">
              <rect x="-10" y="-10" width="24" height="24" rx="6" ry="6" fill="#1f2937" stroke="#94a3b8"/>
              <path d="M-4 2 L2 -4 L8 2 V8 H-4 Z" fill="#22c55e"/>
            </g>
            <circle id="rider" r="8" fill="#ffffff" cx="60" cy="70">
              <animateMotion id="rideAnim" dur="60s" begin="indefinite" fill="freeze" keyPoints="0;0.3;0.55;0.8;1" keyTimes="0;0.2;0.45;0.8;1" calcMode="paced">
                <mpath href="#route" />
              </animateMotion>
            </circle>
          </svg>
          <div class="legend">
            <div class="leg"><span class="sw" style="background:#f59e0b"></span>Restaurant</div>
            <div class="leg"><span class="sw" style="background:#22c55e"></span>Your place</div>
            <div class="leg"><span class="sw" style="background:#ffffff"></span>Rider</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
/* ------------------------------ Data ------------------------------ */
const ITEMS = [
  // Bakery
  { id: 'bk1', name: 'Bread Loaf ðŸž', price: 40, rating: 4.2, time: '10-15 min', type: 'bakery', tags:['Fresh'], img:'ðŸž' },
  { id: 'bk2', name: 'Cupcake ðŸ§', price: 50, rating: 4.4, time: '15-20 min', type: 'bakery', tags:['Sweet'], img:'ðŸ§' },
  { id: 'bk3', name: 'Croissant ðŸ¥', price: 60, rating: 4.5, time: '15-20 min', type: 'bakery', tags:['Flaky'], img:'ðŸ¥' },

  // Vegetarian
  { id: 'vg1', name: 'Veg Biryani ðŸ¥—', price: 120, rating: 4.3, time: '20-30 min', type: 'veg', tags:['Rice'], img:'ðŸ¥—' },
  { id: 'vg2', name: 'Paneer Curry ðŸ›', price: 150, rating: 4.5, time: '25-35 min', type: 'veg', tags:['Spicy'], img:'ðŸ›' },
  { id: 'vg3', name: 'Dosa ðŸ¥ž', price: 100, rating: 4.4, time: '15-25 min', type: 'veg', tags:['South Indian'], img:'ðŸ¥ž' },
  { id: 'vg4', name: 'Veg Burger ðŸ”', price: 80, rating: 4.2, time: '15-20 min', type: 'veg', tags:['Fast Food'], img:'ðŸ”' },

  // Non-Vegetarian
  { id: 'nv1', name: 'Chicken Biryani ðŸ—', price: 180, rating: 4.6, time: '25-35 min', type: 'nonveg', tags:['Best Seller'], img:'ðŸ—' },
  { id: 'nv2', name: 'Grilled Fish ðŸŸ', price: 200, rating: 4.5, time: '30-40 min', type: 'nonveg', tags:['Seafood'], img:'ðŸŸ' },
  { id: 'nv3', name: 'Egg Curry ðŸ¥š', price: 90, rating: 4.3, time: '20-25 min', type: 'nonveg', tags:['Protein Rich'], img:'ðŸ¥š' }
];

const CATS = [
  {key:'all', label:'All'},
  {key:'bakery', label:'Bakery'},
  {key:'veg', label:'Vegetarian'},
  {key:'nonveg', label:'Non-Vegetarian'}
];

/* ---------------------------- Utilities --------------------------- */
const fmt = n => `â‚¹${n.toLocaleString('en-IN')}`;
function el(html){const d=document.createElement('div'); d.innerHTML=html.trim(); return d.firstChild}

/* ----------------------------- State ------------------------------ */
let state = {cat:'all', q:'', cart:{} };

/* --------------------------- Render Chips ------------------------- */
const chipWrap = document.getElementById('chips');
function renderChips(){
  chipWrap.innerHTML='';
  CATS.forEach(c=>{
    const node = el(`<button class="chip ${state.cat===c.key?'active':''}" data-cat="${c.key}">${c.label}</button>`);
    node.addEventListener('click', ()=>{state.cat=c.key; renderGrid()});
    chipWrap.appendChild(node);
  })
}

/* ---------------------------- Render Grid ------------------------- */
const grid = document.getElementById('grid');
function badge(type){
  if(type==='veg') return '<span class="badge veg">VEG</span>'
  if(type==='nonveg') return '<span class="badge nonveg">NON-VEG</span>'
  return '<span class="badge bakery">BAKERY</span>'
}
function dot(type){
  const color = type==='veg' ? '#12d18e' : (type==='nonveg' ? '#ff6363' : '#ffb75e');
  return `<span class="dot" style="background:${color}"></span>`
}

function renderGrid() {
  const q = state.q.toLowerCase();
  const filtered = ITEMS.filter(
    x =>
      (state.cat === 'all' || x.type === state.cat) &&
      (!q || x.name.toLowerCase().includes(q))
  );

  grid.innerHTML = '';

  filtered.forEach(item => {
    const card = el(`
      <article class="card">
        <div class="banner" style="display:flex;align-items:center;justify-content:center;font-size:64px">
          ${item.img}
          <div class="badges">
            ${badge(item.type)} 
            ${item.tags.slice(0, 2).map(
              t => `<span class='badge' style="background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.2)">${t}</span>`
            ).join('')}
          </div>
        </div>
        <div class="card-body">
          <div class="title">
            <h3>${dot(item.type)}${item.name}</h3>
            <div class="rating">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3l2.6 5.3 5.8.8-4.2 4.1 1 5.8L12 16.9 6.8 19l1-5.8L3.6 9.1l5.8-.8L12 3z" fill="#fbbf24"/></svg>
              <span>${item.rating.toFixed(1)}</span>
            </div>
          </div>
          <div class="meta">
            <span class="muted">${item.time}</span>
            <span class="sep">â€¢</span>
            <strong>${fmt(item.price)}</strong>
          </div>
          <div class="add">
            <div class="qty">
              <button aria-label="decrease" data-id="${item.id}" class="dec">âˆ’</button>
              <span id="q-${item.id}">0</span>
              <button aria-label="increase" data-id="${item.id}" class="inc">+</button>
            </div>
            <button class="btn" onclick="addToCart('${item.id}')">Add</button>
          </div>
        </div>
      </article>
    `);
    grid.appendChild(card);
  });
}

/* qty + / - via event delegation */
grid.addEventListener('click', (e) => {
  const incBtn = e.target.closest('.inc');
  const decBtn = e.target.closest('.dec');
  if (incBtn) changeQty(incBtn.dataset.id, +1);
  if (decBtn) changeQty(decBtn.dataset.id, -1);
});

/* ------------------------------ Search ---------------------------- */
const search = document.getElementById('search');
search.addEventListener('input', (e)=>{state.q = e.target.value; renderGrid()})

/* ------------------------------- Cart ----------------------------- */
const cartItems   = document.getElementById('cartItems');
const subTotal    = document.getElementById('subTotal');
const deliveryFee = document.getElementById('deliveryFee');
const taxFee      = document.getElementById('taxFee');
const grandTotal  = document.getElementById('grandTotal');
const cartCountPill = document.getElementById('cartCount');

function changeQty(id, d){
  const elQty = document.getElementById('q-'+id);
  let n = parseInt(elQty.textContent)||0;
  n = Math.max(0, n + d);
  elQty.textContent = n;
}

function addToCart(id) {
  const qEl = document.getElementById('q-' + id);
  const qty = Math.max(1, parseInt(qEl?.textContent || '0', 10) || 0); // default to 1
  state.cart[id] = (state.cart[id] || 0) + qty;
  qEl.textContent = 0;
  renderCart();
  pulse(cartCountPill);
}

function pulse(el){ el.animate([{transform:'scale(1)'},{transform:'scale(1.12)'},{transform:'scale(1)'}], {duration:300}) }

function renderCart(){
  const entries = Object.entries(state.cart).filter(([,qty])=>qty>0);

  if(entries.length===0){
    cartItems.className='empty';
    cartItems.textContent='Your cart is empty. Add something tasty ðŸ˜‹';
    subTotal.textContent = fmt(0);
    deliveryFee.textContent = fmt(0);
    taxFee.textContent = fmt(0);
    grandTotal.textContent = fmt(0);
    document.getElementById("cart-count").innerText = 0;
    document.getElementById("cart-total").innerText = 0;
    cartCountPill.textContent = '0';
    return;
  }

  cartItems.className='';
  cartItems.innerHTML = entries.map(([id,qty])=>{
    const it = ITEMS.find(x=>x.id===id);
    return `<div class='side-line'><div>${dot(it.type)}${it.name} Ã— ${qty}</div><strong>${fmt(it.price*qty)}</strong></div>`;
  }).join('');

  const st = entries.reduce((s,[id,qty])=>{
    const it = ITEMS.find(x=>x.id===id);
    return s + it.price*qty
  },0);

  const del = 29;
  const tax = 14;
  const gt = st + del + tax;
  const itemCount = entries.reduce((s,[,q])=>s+q,0);

  subTotal.textContent = fmt(st);
  deliveryFee.textContent = fmt(del);
  taxFee.textContent = fmt(tax);
  grandTotal.textContent = fmt(gt);

  document.getElementById("cart-count").innerText = itemCount;
  document.getElementById("cart-total").innerText = gt;     // header quick total = grand total
  cartCountPill.textContent = itemCount.toString();
}

document.getElementById('clear').onclick = ()=>{
  state.cart={};
  renderCart();
}

/* ---------------------------- Checkout UX ------------------------- */
const drawer = document.getElementById('drawer');
const checkout = document.getElementById('checkout');
const closeDrawer = document.getElementById('closeDrawer');
const trackItems = document.getElementById('trackItems');

function openDrawer(){ drawer.classList.add('active') }
function close(){ drawer.classList.remove('active'); resetTracker() }
closeDrawer.onclick = close;
drawer.addEventListener('click', e=>{ if(e.target===drawer) close() })

checkout.onclick = ()=>{
  const entries = Object.entries(state.cart).filter(([,q])=>q>0);
  if(entries.length===0){ alert('Your cart is empty!'); return }
  const id = 'ZSTY-' + Math.floor(Math.random()*9000 + 1000);
  document.getElementById('orderId').textContent = 'Order #' + id;
  trackItems.innerHTML = entries.map(([id,qty])=>{
    const it = ITEMS.find(x=>x.id===id);
    return `<div class='side-line'><div>${dot(it.type)}${it.name}</div><div class='muted'>Ã— ${qty}</div></div>`
  }).join('');
  openDrawer();
  startTracker();
}

/* --------------------------- Tracker Logic ------------------------ */
let etaMin = 0, etaSec = 0, timerId = null;
const etaEl = document.getElementById('eta');

function startTracker(){
  const s1=document.getElementById('st1'), s2=document.getElementById('st2'), s3=document.getElementById('st3'), s4=document.getElementById('st4');
  s1.classList.add('active'); setTimeout(()=>s2.classList.add('active'), 2500); setTimeout(()=>s3.classList.add('active'), 6000);
  etaMin = Math.floor(18 + Math.random()*18); etaSec = Math.floor(Math.random()*60); updateEta(); timerId = setInterval(tick, 1000);
  const anim = document.getElementById('rideAnim'); anim.beginElement();
  setTimeout(()=>{ s4.classList.add('active'); clearInterval(timerId); etaEl.textContent='Arriving now'; }, 58000);
}

function resetTracker(){ clearInterval(timerId); etaEl.textContent='--'; ['st1','st2','st3','st4'].forEach(id=>document.getElementById(id).classList.remove('active')) }

function tick(){ if(etaSec===0){ if(etaMin>0){ etaMin--; etaSec=59 } } else { etaSec-- } updateEta() }
function updateEta(){ etaEl.textContent = `${String(etaMin).padStart(2,'0')}:${String(etaSec).padStart(2,'0')} min` }

/* -------------------------- Init on Load -------------------------- */
renderChips(); renderGrid(); renderCart();

const locs = ['Hyderabad â€¢ Now','Warangal â€¢ 25 mins','Hanamkonda â€¢ ASAP']; let i=0; setInterval(()=>{ i=(i+1)%locs.length; document.getElementById('locLabel').textContent = locs[i] }, 7000)

document.getElementById('openCart').addEventListener('click', ()=>{
  if(Object.keys(state.cart).length){ checkout.click() } else { alert('Cart is empty! Add items first.') }
})
  </script>
</body>
</html>
